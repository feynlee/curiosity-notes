<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Ziyue Li">
<meta name="dcterms.date" content="2020-05-24">
<meta name="description" content="When objects move at a constant speed through deep water, the intricate wave pattern can be derived by noticing that only waves stationary relative to the object persist.">

<title>curiosity-notes - Deriving the Kelvin Wake Pattern</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-343667243"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-343667243', { 'anonymize_ip': true});
</script>
<style>html{ scroll-behavior: smooth; }</style>
<script type="application/json" class="js-hypothesis-config">
{
  "theme": "clean"
}
</script>
<script async="" src="https://hypothes.is/embed.js"></script>
<script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=637e822e04255c001315118d&amp;product=inline-share-buttons&amp;source=platform" async="async"></script>
<script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="v97khzznr8B" data-description="Support me on Buy me a coffee!" data-message="" data-color="#5F7FFF" data-position="Right" data-x_margin="18" data-y_margin="18"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../styles.css">
<meta property="og:title" content="curiosity-notes - Deriving the Kelvin Wake Pattern">
<meta property="og:description" content="When objects move at a constant speed through deep water, the intricate wave pattern can be derived by noticing that only waves stationary relative to the object persist.">
<meta property="og:image" content="https://upload.wikimedia.org/wikipedia/commons/4/4f/Wake.avon.gorge.2boats.arp.750pix.jpg">
<meta property="og:site-name" content="curiosity-notes">
<meta name="twitter:title" content="curiosity-notes - Deriving the Kelvin Wake Pattern">
<meta name="twitter:description" content="When objects move at a constant speed through deep water, the intricate wave pattern can be derived by noticing that only waves stationary relative to the object persist.">
<meta name="twitter:image" content="https://upload.wikimedia.org/wikipedia/commons/4/4f/Wake.avon.gorge.2boats.arp.750pix.jpg">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">curiosity-notes</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html" rel="" target="">
 <span class="menu-text">Posts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../TIL.html" rel="" target="">
 <span class="menu-text">TIL</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../books/books.html" rel="" target="">
 <span class="menu-text">Books</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-ai-art" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">AI Art</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-ai-art">    
        <li>
    <a class="dropdown-item" href="../ai_art-dd.html" rel="" target="">
 <span class="dropdown-text">Disco Diffusion</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ai_art-sd.html" rel="" target="">
 <span class="dropdown-text">Stable Diffusion</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../projects.html" rel="" target="">
 <span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../Apps/Long-Text-Pic.html" rel="" target="">
 <span class="menu-text">Apps</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/feynlee" rel="" target=""><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/curiosity_notes" rel="" target=""><i class="bi bi-twitter" role="img" aria-label="Twitter">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-bi-rss" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
      <i class="bi bi-rss" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-bi-rss">    
        <li>
    <a class="dropdown-item" href="https://feynlee.github.io/curiosity-notes/index.xml" rel="" target=""><i class="bi bi-rss" role="img" aria-label="Posts RSS">
</i> 
 <span class="dropdown-text">Subscribe to Posts</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://feynlee.github.io/curiosity-notes/TIL.xml" rel="" target=""><i class="bi bi-rss" role="img" aria-label="TIL RSS">
</i> 
 <span class="dropdown-text">Subscribe to TIL</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://feynlee.github.io/curiosity-notes/projects.xml" rel="" target=""><i class="bi bi-rss" role="img" aria-label="Projects RSS">
</i> 
 <span class="dropdown-text">Subscribe to Projects</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Deriving the Kelvin Wake Pattern</h1>
                  <div>
        <div class="description">
          When objects move at a constant speed through deep water, the intricate wave pattern can be derived by noticing that only waves stationary relative to the object persist.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Physics</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Ziyue Li </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 24, 2020</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul>
  <li><a href="#phase-velocity-and-group-velocity" id="toc-phase-velocity-and-group-velocity" class="nav-link" data-scroll-target="#phase-velocity-and-group-velocity">Phase Velocity and Group Velocity</a></li>
  <li><a href="#water-waves" id="toc-water-waves" class="nav-link" data-scroll-target="#water-waves">Water Waves</a></li>
  </ul></li>
  <li><a href="#derivation-of-the-kelvin-wake-pattern" id="toc-derivation-of-the-kelvin-wake-pattern" class="nav-link" data-scroll-target="#derivation-of-the-kelvin-wake-pattern">Derivation of the Kelvin Wake Pattern</a></li>
  <li><a href="#kelvin-wake-angle" id="toc-kelvin-wake-angle" class="nav-link" data-scroll-target="#kelvin-wake-angle">Kelvin Wake Angle</a></li>
  <li><a href="#final-words" id="toc-final-words" class="nav-link" data-scroll-target="#final-words">Final Words</a></li>
  <li><a href="#appendix" id="toc-appendix" class="nav-link" data-scroll-target="#appendix">Appendix</a></li>
  <li><a href="#footnotes" id="toc-footnotes" class="nav-link" data-scroll-target="#footnotes">Footnotes</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Kelvin wake is the pattern generated by objects moving through deep waters at a constant speed.</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/4/4f/Wake.avon.gorge.2boats.arp.750pix.jpg" class="img-fluid"></p>
<p>In Feynman’s lecture <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>, he mentioned that if one is clever enough, one can derive the Kelvin wake pattern from the fact that the pattern of the waves is stationary relative to the constant velocity of the boat; any other pattern would get lost from the boat. This post attempts to lay out the details of this derivation.</p>
<section id="phase-velocity-and-group-velocity" class="level2">
<h2 class="anchored" data-anchor-id="phase-velocity-and-group-velocity">Phase Velocity and Group Velocity</h2>
<p>Here I assume the reader has a basic understanding of the phase velocity and group velocity.</p>
<p>The phase velocity is the velocity at which the actual wave amplitudes travel, and the group velocity is the velocity at which the wave groups travel. The group velocity for water goes half as fast as the phase. This means, if one follows a particular crest of the water waves, they will find it moves forward in the group and gradually gets weaker and dies out in the front, and a weaker one in the back appears mysteriously and gets stronger, as show in the following demonstration:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://upload.wikimedia.org/wikipedia/commons/d/d8/Wave_packet_propagation_%28phase_faster_than_group%2C_nondispersive%29.gif" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">By <a href="//commons.wikimedia.org/wiki/User:Becarlson">Becarlson</a> - Own work, <a href="https://creativecommons.org/licenses/by-sa/4.0">CC BY-SA 4.0</a>, <a href="https://commons.wikimedia.org/w/index.php?curid=67433782">Link</a></figcaption>
</figure>
</div>
</section>
<section id="water-waves" class="level2">
<h2 class="anchored" data-anchor-id="water-waves">Water Waves</h2>
<p>I will also take as a given the wave velocities in deep water:</p>
<p><span class="math display">\[\begin{aligned}
v_{phase}&amp;=\frac{\omega}{k}=\sqrt{\frac{g\lambda}{2\pi}}=\sqrt{\frac{g}{k}}, \\
v_{group}&amp;=\frac{d \omega}{d k}=\frac{1}{2}\sqrt{\frac{g\lambda}{2\pi}}=\frac{1}{2}\sqrt{\frac{g}{k}}.
\end{aligned}\]</span></p>
<p>Notice that the phase velocity is twice the group velocity.</p>
<p>If you’re interested, a simple explanation of the above formula is given by Feynman in his physics lectures <a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>.</p>
</section>
</section>
<section id="derivation-of-the-kelvin-wake-pattern" class="level1">
<h1>Derivation of the Kelvin Wake Pattern</h1>
<p>The derivation follows 4 steps:</p>
<ol type="1">
<li><p><strong>A general sketch of wavefronts for a certain wave length</strong></p>
<p>Because the group velocity is half of the phase velocity, we can construct the following general propagation pattern:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/2020/Kelvin_wake-phase_velocity_and_group_velocity.png" class="img-fluid figure-img" style="width:60.0%"></p>
</figure>
</div>
<p>The boat is at point A. For a certain wavelength, AD is where the wavefront would be for the phase velocity and because the group velocity is half of the phase velocity, AC is where the group of waves propagates to. The green lines are all parallel to AD and mark the phase wavefront on AC.</p></li>
<li><p><strong>Only waves with certain velocities in certain directions are stationary relative to the boat</strong></p>
<p>This can be seen by moving the wavefront pattern sketched above horizontally.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/2020/Kelvin_wake-phase_velocity_propagating.png" class="img-fluid figure-img" style="width:60.0%"></p>
</figure>
</div>
<p>This procedure ensures that the wavefront pattern is stationary with respect to the boat (point A and point A’). Because the wavefront pattern’s construction is solely dependent on the phase velocity wavefront (the dashed line AD), we just have to make sure that AD propagates to A’D’ when A moves to A’:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/2020/Kelvin_wake-geometry.png" class="img-fluid figure-img" style="width:60.0%"></p>
</figure>
</div>
<p>In other words, in any specific direction, only waves that have a certain phase velocity so that</p>
<p><span class="math display">\[v_p=V \sin\alpha,\]</span></p>
<p>where <span class="math inline">\(V\)</span> is the speed of the boat, will be “dragged along” by the boat. <em>In the following discussion, we will only be using waves that satisfy this condition.</em></p></li>
<li><p><strong>Connect “stationary” waves that are at the same phase to form equal-phase wavefronts</strong></p>
<p>To derive the wave pattern, we need to trace out “equal-phase lines” that connect wavefronts of the same phase.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/2020/Kelvin_wake-equal_phase.png" class="img-fluid figure-img" style="width:70.0%"></p>
</figure>
</div>
<p>Every point on the equal-phase line (depicted as green in the above plot) originates from a different point on the horizontal line. Let’s pick the point O as the origin, for example, and the phase at point C can be calculated as</p>
<p><span class="math display">\[\phi = \frac{OC}{k_p} = \frac{v_p t}{2 k} = \frac{gt}{2 v_p},\]</span></p>
<p>where <span class="math inline">\(t\)</span> is the time the boat takes to go from O to A.</p>
<p>On this equal-phase line, this phase remains constant, so now we can use this relation, together with the fact that <span class="math inline">\(v_p=V \sin \alpha\)</span>, to rewrite the x, y coordinates of point C:</p>
<p><span class="math display">\[\begin{aligned}
   x &amp;= Vt - \frac{1}{2}v_p t \sin \alpha \\
   &amp;= Vt - \frac{1}{2}Vt \sin^2 \alpha \\
   &amp;= Vt \left(1- \frac{1}{2} \sin^2 \alpha \right) \\
   &amp;= \frac{2\phi V^2}{g} \sin \alpha \left(1- \frac{1}{2} \sin^2 \alpha \right) \\
   \\
y &amp;= \frac{1}{2}v_p t \cos \alpha \\
&amp;= \frac{Vt}{2} \sin \alpha \cos \alpha \\
&amp;= \frac{\phi V^2}{g} \sin^2 \alpha \cos \alpha \\
\end{aligned}\]</span></p>
<p>Now that x and y are written in terms of the parameter <span class="math inline">\(\alpha\)</span> and the constant <span class="math inline">\(\phi\)</span>, we can plot the equal-phase line in mathematica:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/2020/Kelvin_wake-single.png" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div></li>
<li><p><strong>Composite all equal phase lines that are separated by <span class="math inline">\(2\pi\)</span></strong></p>
<p>The peaks of waves are separated by <span class="math inline">\(2\pi\)</span>. Since the waves at the front of the boat (point A) are always at the peak, which has the phase of 0, the peaks of waves are at <span class="math inline">\(\phi = 2\pi n\)</span>, where <span class="math inline">\(n\)</span> is any positive integer. Overlaying all equal-phase lines with <span class="math inline">\(\phi = 2\pi n\)</span>, we see that the peaks of waves form the famous “Kelvin Wake” pattern:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/2020/Kelvin_wake-multiple.png" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
<p>Incidentally, the waves propagating in the X-axis direction have to have the speed of <span class="math inline">\(v_p=V\)</span> to remain stationary relative to the boat. The wavelength is therefore <span class="math inline">\(\lambda_0 = 2\pi V^2/g\)</span>. For these waves, we can plug <span class="math inline">\(\alpha=\pi/2\)</span> into the x coordinates and see that indeed the x coordinates of the peaks <span class="math inline">\(x=\phi V^2/g = 2\pi n V^2/g = n\lambda_0\)</span> are separated by <span class="math inline">\(2\pi\)</span>.</p></li>
</ol>
</section>
<section id="kelvin-wake-angle" class="level1">
<h1>Kelvin Wake Angle</h1>
<p>Now that we’ve derived the wake pattern, it should be straightforward to derive the famous Kelvin Wake angle. I will leave this as an exercise to the readers. In fact, we don’t even need to have the full wake pattern to derive the Kelvin Wake angle. By noticing that this angle is the largest angle that can be formed by the line connecting the boat and the wave propagating in a certain direction whose group velocity follows <span class="math inline">\(v_g=\frac{v_p}{2}=\frac{1}{2}V \sin \alpha\)</span>, we can immediately get the Kelvin Wake angle as <span class="math inline">\(\theta=\arctan \sqrt{2} - \arctan \frac{\sqrt{2}}{2}= 19.7^{\circ}\)</span>.</p>
</section>
<section id="final-words" class="level1">
<h1>Final Words</h1>
<p>Notice that the speed of the boat only changes the spacing between the peaks, but the general pattern remains the same. For Kelvin Wake’s pattern construction that takes into account the size of the boat, the readers are referred to this more advanced research <a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>.</p>
</section>
<section id="appendix" class="level1">
<h1>Appendix</h1>
<p>Minute Physics has done a very nice illustration of the wake pattern formation:</p>
<p>{% include youtube.html content=“https://youtu.be/95sQcSulRFM” %}</p>
</section>
<section id="footnotes" class="level1">
<h1>Footnotes</h1>


<div class="sharethis-inline-share-buttons pt-5">

</div>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p><a href="https://www.feynmanlectures.caltech.edu/I_51.html">Feynman Lectures on Physics Volume 1, Chapter 51.</a><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p><a href="https://www.feynmanlectures.caltech.edu/I_51.html">Feynman Lectures on Physics Volume 1, Chapter 51.</a><a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p><a href="https://arxiv.org/pdf/1309.6751.pdf">Kelvin wake pattern at large Froude numbers</a><a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp("https:\/\/feynlee\.github\.io\/curiosity-notes");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
      }
    }
});
</script>
<script src="https://giscus.app/client.js" data-repo="feynlee/curiosity-notes" data-repo-id="MDEwOlJlcG9zaXRvcnkyNDgwOTkxNzg=" data-category="Announcements" data-category-id="DIC_kwDODsmxas4CR7S3" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="preferred_color_scheme" data-lang="en" crossorigin="anonymous" data-loading="lazy" async="">
</script>
</div> <!-- /content -->



<script src="../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>